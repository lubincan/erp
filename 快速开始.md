# 快速开始指南

## 一键启动

### Windows系统

```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 运行项目
python app.py
```

### Linux/Mac系统

```bash
# 1. 安装依赖
pip3 install -r requirements.txt

# 2. 运行项目
python3 app.py
```

## 访问系统

启动成功后，在浏览器中访问：

- **首页**: http://127.0.0.1:5000
- **打卡页面**: http://127.0.0.1:5000/attendance

## 测试打卡功能

1. 打开打卡页面：http://127.0.0.1:5000/attendance
2. 选择员工（默认有管理员账户，user_id=1）
3. 点击"上班打卡"按钮
4. 点击"查询今日"查看打卡记录
5. 点击"下班打卡"完成下班打卡

## API测试

### 使用curl测试

```bash
# 上班打卡
curl -X POST "http://127.0.0.1:5000/api/attendance/checkin?user_id=1"

# 下班打卡
curl -X POST "http://127.0.0.1:5000/api/attendance/checkout?user_id=1"

# 查询今日打卡记录
curl "http://127.0.0.1:5000/api/attendance/today?user_id=1"

# 查询历史记录
curl "http://127.0.0.1:5000/api/attendance/records?user_id=1&page=1&per_page=10"
```

### 使用Python requests测试

```python
import requests

base_url = "http://127.0.0.1:5000"

# 上班打卡
response = requests.post(f"{base_url}/api/attendance/checkin?user_id=1")
print(response.json())

# 下班打卡
response = requests.post(f"{base_url}/api/attendance/checkout?user_id=1")
print(response.json())

# 查询今日记录
response = requests.get(f"{base_url}/api/attendance/today?user_id=1")
print(response.json())
```

## 常见问题

### 1. 端口被占用

如果5000端口被占用，可以修改 `app.py` 中的端口号：

```python
app.run(host='0.0.0.0', port=8080, debug=True)  # 改为8080端口
```

### 2. 数据库文件位置

SQLite数据库文件 `erp.db` 会创建在项目根目录下。

### 3. 添加新员工

当前版本需要在数据库中手动添加，或通过Python代码添加：

```python
from app import create_app, db
from app.models import User

app = create_app()
with app.app_context():
    new_user = User(
        username='zhangsan',
        password='123456',
        name='张三',
        role='employee'
    )
    db.session.add(new_user)
    db.session.commit()
    print(f"新员工ID: {new_user.id}")
```

## 下一步

- 查看 `运行说明.md` 了解详细功能
- 查看 `README.md` 了解项目整体规划
- 查看 `plan.md` 了解开发计划

